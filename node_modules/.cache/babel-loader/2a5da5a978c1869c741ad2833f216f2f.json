{"ast":null,"code":"import { toUnitless } from \"@mui/material/styles/cssUtils\";\nimport { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nconst baseURL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-PT';\nexport const getPosts = async token => {\n  try {\n    const response = await fetch(`${baseURL}/posts`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const results = await response.json();\n    return results;\n  } catch (ex) {\n    console.log('error getting all posts');\n  }\n};\nexport const registerUser = async (username, password) => {\n  try {\n    const response = await fetch(`${baseURL}/users/register`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer TOKEN_STRING_HERE'\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    });\n    const result = await response.json();\n    return result;\n  } catch (ex) {\n    console.log('error registering user');\n  }\n};\nexport const loginUser = async (username, password) => {\n  try {\n    const response = await fetch(`${baseURL}/users/login`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    });\n    const result = await response.json();\n    return result;\n  } catch (ex) {\n    console.log('Login Error');\n  }\n};\nexport const grabData = async token => {\n  try {\n    const response = await fetch(`${baseURL}/users/me`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const result = await response.json();\n    return result;\n  } catch (ex) {\n    console.log(console.error);\n  }\n};\nexport const makePost = async (token, post) => {\n  try {\n    const response = await fetch(`${baseURL}/posts`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        post: {\n          title: post.title,\n          description: post.description,\n          price: post.price,\n          location: post.location // willDeliver: post.willDeliver\n\n        }\n      })\n    });\n    const result = await response.json();\n    return result;\n  } catch (ex) {\n    console.log(console.error);\n  }\n};\nexport const deletePost = async (token, _id) => {\n  // const { id } = useParams()\n  // const [currentPost] = posts.filter(post => post._id === id)\n  // const {title, description, location, price, willDeliver} = currentPost;\n  try {\n    const response = await fetch(`${baseURL}/posts/${_id}`, {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const result = await response.json();\n    console.log(result.success);\n    console.log(token);\n    return result;\n  } catch (ex) {\n    console.log(\"Post could not be deleted\");\n  }\n};","map":{"version":3,"names":["toUnitless","useState","useParams","baseURL","getPosts","token","response","fetch","headers","results","json","ex","console","log","registerUser","username","password","method","body","JSON","stringify","user","result","loginUser","grabData","error","makePost","post","title","description","price","location","deletePost","_id","success"],"sources":["/home/sean/Coding/course_work/Stranger's_Things/src/api/index.js"],"sourcesContent":["import { toUnitless } from \"@mui/material/styles/cssUtils\";\nimport { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nconst baseURL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-PT'\n\nexport const getPosts = async (token) => {\n  try {\n    const response = await fetch(`${baseURL}/posts`, {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n    });\n    const results = await response.json()\n    return (results);\n    }\n  catch (ex) {\n    console.log('error getting all posts')\n  }\n}\n\nexport const registerUser = async (username, password) => {\n  try {\n    const response = await fetch(`${baseURL}/users/register`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer TOKEN_STRING_HERE'\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    })\n    const result = await response.json();\n    return result;\n  }\n  catch (ex) {\n    console.log('error registering user')\n  }\n\n}\n\nexport const loginUser = async (username, password) => {\n  try {\n    const response = await fetch(`${baseURL}/users/login`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    })\n    const result = await response.json();\n    return result;\n  }\n  catch (ex) {\n    console.log('Login Error')\n  }\n}\n\nexport const grabData = async (token) => {\n  try{\n    const response = await fetch(`${baseURL}/users/me`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n    })\n    const result = await response.json();\n    return result;\n  }\n  catch(ex){\n    console.log(console.error)\n  }\n}\n\nexport const makePost = async (token, post) => {\n  try{\n    const response = await fetch(`${baseURL}/posts`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        post: {\n          title: post.title,\n          description: post.description,\n          price: post.price,\n          location: post.location\n          // willDeliver: post.willDeliver\n        }\n      })\n    })\n    const result = await response.json();\n    return result;\n  }\n  catch(ex){\n    console.log(console.error)\n  }\n}\n\nexport const deletePost = async(token, _id) => {\n  // const { id } = useParams()\n  // const [currentPost] = posts.filter(post => post._id === id)\n  // const {title, description, location, price, willDeliver} = currentPost;\n  try{\n    const response = await fetch(`${baseURL}/posts/${_id}`, {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n    })\n    const result = await response.json();\n    console.log(result.success)\n    console.log(token)\n    return result;\n    \n    \n  }\n  catch(ex){\n    console.log(\"Post could not be deleted\")\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}